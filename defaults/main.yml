---
# versions
postgres_release: 12

# os user
postgres_user: postgres
postgres_group: postgres


# packages
repmgr_package: "repmgr{{ postgres_release }}"
postgresql_server_package: "postgresql{{ postgres_release }}-server"

# services
repmgr_service: "repmgr{{postgres_release}}"
postgres_service: "postgresql-{{postgres_release}}"

# postgres vars
repmgr_postgres_admin_user: 'postgres'
repmgr_postgres_admin_user_group: 'postgres'
postgres_ssh_dir: '/var/lib/pgsql/.ssh'
postgres_ssh_rsa_key: "{{ postgres_ssh_dir }}/id_rsa"

# postgres vars
postgres_data_directory: "/var/lib/pgsql/{{ postgres_release }}/data"
postgres_conf_directory: "/etc/postgresql/{{ postgres_release }}/data"

# repmgr repository
repmgr_install_repository: true
repmgr_install_gpg_key: true
repmgr_repository: "https://dl.2ndquadrant.com/default/release/browse/rpm/packages/rhel/{{ ansible_distribution_major_version }}/{{ ansible_architecture }}/{{ postgres_release }}"
repmgr_gpg_file: '/etc/pki/rpm-gpg/RPM-GPG-KEY-2NDQ-DL-DEFAULT'
repmgr_gpg_key: '-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: GnuPG v1

mQINBFqpNU0BEAC6tFZf3Vt5FB4sG0pDeomVypnxTudww/bFm4ZWg3NsP4tnhaao
ngO32/ExyyhLbYSIVsQIHYPEamzLJbJwCDTxMLE2x7NrXbC0xeel0Ku7YQcL5VZC
EWNJapAIgynao5nTlPMxV4U5TT2BWT2FlbyyRUCn9ng6VvTuxMczF9yKtP4ITKwy
DWe4EGJmxumFyiMzjH3QN96PT+kUfPgDbf6oQfCCZAauVzTpXmkWpt1bw5BlDpXF
gEx7bLYufaHobVmchrsE+fNGRTvByeWp5sXE+YCeOJWFwL5chSRSP/M5xMFR3C8C
k6OVT0z2h7a/8ftZMIa3L5Fuc6oQxPY3XZe0JP4jOfqhBw0I2IEffW9yEKqh6GkS
VK1JaDFnS3KkCKXvTgNCOuZENfSC44rycrOfnPz9r3l4WQgUyOL8FdLq/oas/G97
M2DiUQYK9GkQkjarNzIzklfPByqkNSUHr7uSV0NiWQdlrm47uxg2ILC+k9aiAl5N
/3zR0W2pyjp9C1FqAY/VFa9m1+WNmWHHmFEgEU2mORymb9/WqUGpJ033zZqmQrwC
PkbmYjY2zYgY2vaPHpaUa+sJb7Blph334NOUI9Z37+vaHP/4VlmH8XikRZ58kSPk
i5npwKUwWhrA794Smq27DB1GlFYG3L2whkVuAm37tW/1G85hPynZAPLAWwARAQAB
tD5QdWJsaWMgcmVwb3NpdG9yeSBzaWduaW5nIGtleSAybmRRdWFkcmFudCA8Y2lA
Mm5kcXVhZHJhbnQuY29tPokCPgQTAQIAKAUCWqk1TQIbAwUJA8JnAAYLCQgHAwIG
FQgCCQoLBBYCAwECHgECF4AACgkQmQTNS9a68MP/AhAAhSP7I5XVlQaDk0G/JSAx
jkeeJCBTM2tBF7YmgBHqEetPg39zNGfXKsQA9nJ4+TS+GaCPWeG6gP7nH40vgbkP
16Tz4179hv/sDmpTjqFhDucU2RJLB4mraZRTjDRSatfRsdcczP6tRCUYJbwVFvVx
ztq46h4gSzW0N/Afl9twqO3p3hNPmbMBqAtZtX9xk0mv0mjF/fO+kneGJ3VxR1W0
TuoBTMQRzqLdVmvqqrxhsnH9pf3c4CDLRtz/FPRBWcTryb/JSf2xA/D+gE4dqTRv
tmY4jyAx5tRe5J0TWy7ghGeQiowTgpVJZ9qLp0vZcX+G2hMn1T7g6ftV/shIp5+Z
PmzGZqw+Dx5V1Npcm0KGmc0/QGN/1MPRiq4YQk1CQWIEc5N3s6FkwTsWmEdve8T4
PTo4/XSzRBT7M3AdSBhKzl4i3IPct5ld8pP1wWk9u/fMnGnbmGERQGohvigsxqc/
KMi29dG8iGP5gJNEbEvNyD4LtfeQYhB3vI/RI5CRrBCKnqdZlJemPiS08w8zJrny
WogrXlkE4pGu22Ryh+jI4jtusBktPU8Kxx1bKtDkr9EAqYazWSu9Ha/w79loFpfN
RYH5/+4dehDUjcrluUcN7hshJijqlkgUctjLYOdleJHKAgSX06+6oeu74SH/i+z6
6SUYZxf80izYErwrFxhxlx8=
=V6ND
-----END PGP PUBLIC KEY BLOCK-----'

# postgresql repository
repmgr_install_psql_repository: true
repmgr_install_psql_gpg_key: true
repmgr_psql_repository: "https://download.postgresql.org/pub/repos/yum/{{ postgres_release }}/redhat/rhel-$releasever-$basearch"
repmgr_psql_gpg_file: '/etc/pki/rpm-gpg/RPM-GPG-KEY-PGDG'
repmgr_psql_gpg_key: '-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: GnuPG v1.4.7 (GNU/Linux)

mQGiBEeD8koRBACC1VBRsUwGr9gxFFRho9kZpdRUjBJoPhkeOTvp9LzkdAQMFngr
BFi6N0ov1kCX7LLwBmDG+JPR7N+XcH9YR1coSHpLVg+JNy2kFDd4zAyWxJafjZ3a
9zFg9Yx+0va1BJ2t4zVcmKS4aOfbgQ5KwIOWUujalQW5Y+Fw39Gn86qjbwCg5dIo
tkM0l19h2sx50D027pV5aPsD/2c9pfcFTbMhB0CcKS836GH1qY+NCAdUwPs646ee
Ex/k9Uy4qMwhl3HuCGGGa+N6Plyon7V0TzZuRGp/1742dE8IO+I/KLy2L1d1Fxrn
XOTBZd8qe6nBwh12OMcKrsPBVBxn+iSkaG3ULsgOtx+HHLfa1/p22L5+GzGdxizr
peBuA/90cCp+lYcEwdYaRoFVR501yDOTmmzBc1DrsyWP79QMEGzMqa393G0VnqXt
L4pGmunq66Agw2EhPcIt3pDYiCmEt/obdVtSJH6BtmSDB/zYhbE8u3vLP3jfFDa9
KXxgtYj0NvuUVoRmxSKm8jtfmj1L7zoKNz3jl+Ba3L0WxIv4+bRBUG9zdGdyZVNR
TCBSUE0gQnVpbGRpbmcgUHJvamVjdCA8cGdzcWxycG1zLWhhY2tlcnNAcGdmb3Vu
ZHJ5Lm9yZz6IYAQTEQIAIAUCR4PySgIbIwYLCQgHAwIEFQIIAwQWAgMBAh4BAheA
AAoJEB8W0uFELfD4jnkAoMqd6ZwwsgYHZ3hP9vt+DJt1uDW7AKDbRwP8ESKFhwdJ
8m91RPBeJW/tMLkCDQRHg/JKEAgA64+ZXgcERPYfZYo4p+yMTJAAa9aqnE3U4Ni6
ZMB57GPuEy8NfbNya+HiftO8hoozmJdcI6XFyRBCDUVCdZ8SE+PJdOx2FFqZVIu6
dKnr8ykhgLpNNEFDG3boK9UfLj/5lYQ3Y550Iym1QKOgyrJYeAp6sZ+Nx2PavsP3
nMFCSD67BqAbcLCVQN7a2dAUXfEbfXJjPHXTbo1/kxtzE+KCRTLdXEbSEe3nHO04
K/EgTBjeBUOxnciH5RylJ2oGy/v4xr9ed7R1jJtshsDKMdWApwoLlCBJ63jg/4T/
z/OtXmu4AvmWaJxaTl7fPf2GqSqqb6jLCrQAH7AIhXr9V0zPZwADBQgAlpptNQHl
u7euIdIujFwwcxyQGfee6BG+3zaNSEHMVQMuc6bxuvYmgM9r7aki/b0YMfjJBk8v
OJ3Eh1vDH/woJi2iJ13vQ21ot+1JP3fMd6NPR8/qEeDnmVXu7QAtlkmSKI9Rdnjz
FFSUJrQPHnKsH4V4uvAM+njwYD+VFiwlBPTKNeL8cdBb4tPN2cdVJzoAp57wkZAN
VA2tKxNsTJKBi8wukaLWX8+yPHiWCNWItvyB4WCEp/rZKG4A868NM5sZQMAabpLd
l4fTiGu68OYgK9qUPZvhEAL2C1jPDVHPkLm+ZsD+90Pe66w9vB00cxXuHLzm8Pad
GaCXCY8h3xi6VIhJBBgRAgAJBQJHg/JKAhsMAAoJEB8W0uFELfD4K4cAoJ4yug8y
1U0cZEiF5W25HDzMTtaDAKCaM1m3Cbd+AZ0NGWNg/VvIX9MsPA==
=au6K
-----END PGP PUBLIC KEY BLOCK-----'

# repmgr vars
repmgr_conf_file: 'repmgr.conf'
repmgr_conf_dir: '/etc/repmgr/{{ postgres_release }}'
repmgr_user: 'repmgr'
repmgr_dbname: 'repmgr'

# repmgr config options
repmgr_conninfo: "host=127.0.0.1 user={{repmgr_postgres_user}} dbname={{ repmgr_dbname }}"
repmgr_node_id: 1
repmgr_failover: 'automatic'
repmgr_loglevel: 'INFO'
repmgr_logfacility: 'STDERR'
repmgr_log_file: '/var/log/repmgr/repmgr.log'
repmgr_pg_bindir: "/usr/pgsql-{{ postgres_release }}/bin"

# repmgr commands
repmgr_promote_command: "/usr/pgsql-{{ postgres_release }}/bin/repmgr standby promote -f /etc/repmgr/9.6/repmgr.conf --log-to-file"
repmgr_follow_command: "/usr/pgsql-{{ postgres_release }}/bin/repmgr standby follow -f /etc/repmgr/9.6/repmgr.conf --log-to-file"
repmgr_start_command: "/usr/bin/sudo /usr/bin/systemctl start postgresql-{{ postgres_release }}.service"
repmgr_stop_command: "/usr/bin/sudo /usr/bin/systemctl stop postgresql-{{ postgres_release }}.service"
repmgr_restart_command: "/usr/bin/sudo /usr/bin/systemctl restart postgresql-{{ postgres_release }}.service"


# role management
repmgr_is_master: false
repmgr_register_master: false
repmgr_register_standby: false
repmgr_clone_standby: false
repmgr_bootstrap: false
repmgr_install_only: true
repmgr_install_postgresql: false
